!function(){"use strict";const e="IS_WHATS_APP_OTP_LESS_AUTO_LOAD_POPUP",t={IS_SSO_LOGIN:"IS_SSO_LOGIN",ACCOUNT_PAGE_LOGIN:"isAccountPageLogin",SHOPIFY_SESSION_KEY:"_shopify_y",SHOPIFY_REDIRECT_LINK:"SHOPIFY_REDIRECT_LINK",KC_PHONE:"KC_PHONE",IS_EMAIL_REQUIRED:"IS_EMAIL_REQUIRED",unverified_phone_number:"unverified_phone_number",KP_NON_OTP_VERIFIED_USER:"kp_non_otp_verified_user",KP_VISITOR_ID:"kp-v-id",KP_CONFIDENCE_SCORE:"kp-c-score",NOTIFY_PHONE_NUMBER:"notify_phone_number",KP_VISITOR_INFO:"kp-v-info",RP_PHONE_NUMBER:"rp-phone-number",SHOPIFY_COD_UNAUTH_PHONE_NUMBER:"app_unauth_user",AUTOLOAD_POPUP_ID:"autoload-popup-id",AUTOLOAD_POPUP_TYPE:"autoload-popup-type",SR_PHONE_NUMBER:"non_authed_info",VISITOR_ID_SOURCE:"vId_source",VISITED_NETWORK:"usr_trck",KP_TOKEN:"kpToken",SHOPIFY_API_TAGS:"shopify_api_tags",SHOPIFY_API_TAGS_LOGIN_MODAL:"shopify_api_tags_login_modal",NO_OTP_FLOW_PHONE_NUMBER:"no_otp_flow_phone_number",EXPIRED_PH_NO:"expired_ph_no",IDB_PH_NO:"idb_ph_no",KP_REQUEST_ID:"kp-request-id",KP_EMAIL:"kp_email",KP_MULTIPLE_EMAIL:"kp_multiple_email",KP_CUSTOMER_ID:"kp_customer_id",FP_REQUEST_ID:"fp_req"},n="phone-no-received-rp",o={kp_notification_checked:"kp_notification_checked",kp_non_otp_verified_phone:"kp_non_otp_verified_phone",kp_no_otp_based_phone:"kp_no_otp_based_phone"},r="KC_PHONE_NUMBER",i="RP_PHONE_NUMBER",s="SR_PHONE_NUMBER",a="EXPIRED_TOKEN_PHONE_NUMBER",c="NON_OTP_VERIFIED_PHONE",u="SHOPIFY_COD_UNAUTH_PHONE_NUMBER",_="store_data_from_merchant",p="check_core_token",l="kp_vst_cnt",d="kp-merchant-id",h="gk-merchant-id",f="gk-access-token",m="gk-request-id",E="kp-request-id",g="checkout-access-token",w="gk_login_source",y="kp_user_id",b="+91",O="coreToken",k="fpPhone",N="kcPhone",S="rpPhone",I="srPhone",P="nonOTPVerifiedPhone",v="shopify_app_phone_number",T="noOtpFlowPhoneNumber",R="expiresTokenPhone",A="unverifiedPhone",D="kwikPass_plugin",U={LOGIN_MODAL:"login_modal"},C={something_went_worng:"Something went wrong"},L="0123456789abcdef";class M{constructor(e){this.bytes=e}static ofInner(e){if(16!==e.length)throw new TypeError("not 128-bit length");return new M(e)}static fromFieldsV7(e,t,n,o){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(o)||e<0||t<0||n<0||o<0||e>0xffffffffffff||t>4095||n>1073741823||o>4294967295)throw new RangeError("invalid field value");const r=new Uint8Array(16);return r[0]=e/2**40,r[1]=e/2**32,r[2]=e/2**24,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|t>>>8,r[7]=t,r[8]=128|n>>>24,r[9]=n>>>16,r[10]=n>>>8,r[11]=n,r[12]=o>>>24,r[13]=o>>>16,r[14]=o>>>8,r[15]=o,new M(r)}static parse(e){var t,n,o,r;let i;switch(e.length){case 32:i=null===(t=/^[0-9a-f]{32}$/i.exec(e))||void 0===t?void 0:t[0];break;case 36:i=null===(n=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))||void 0===n?void 0:n.slice(1,6).join("");break;case 38:i=null===(o=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e))||void 0===o?void 0:o.slice(1,6).join("");break;case 45:i=null===(r=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e))||void 0===r?void 0:r.slice(1,6).join("")}if(i){const e=new Uint8Array(16);for(let t=0;t<16;t+=4){const n=parseInt(i.substring(2*t,2*t+8),16);e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n}return new M(e)}throw new SyntaxError("could not parse UUID string")}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=L.charAt(this.bytes[t]>>>4),e+=L.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");return e}toHex(){let e="";for(let t=0;t<this.bytes.length;t++)e+=L.charAt(this.bytes[t]>>>4),e+=L.charAt(15&this.bytes[t]);return e}toJSON(){return this.toString()}getVariant(){const e=this.bytes[8]>>>4;if(e<0)throw new Error("unreachable");if(e<=7)return this.bytes.every((e=>0===e))?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every((e=>255===e))?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return"VAR_10"===this.getVariant()?this.bytes[6]>>>4:void 0}clone(){return new M(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(let t=0;t<16;t++){const n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}class F{constructor(e){this.timestamp=0,this.counter=0,this.random=null!=e?e:H()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let n=this.generateOrAbortCore(e,t);return void 0===n&&(this.timestamp=0,n=this.generateOrAbortCore(e,t)),n}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<1||e>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(t<0||t>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+t>=this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return M.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}generateV4(){const e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,M.ofInner(e)}}const H=()=>{if("undefined"!=typeof crypto&&void 0!==crypto.getRandomValues)return new x;if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random())}};class x{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let K;const B=()=>(K||(K=new F)).generate();function G(){}function V(e){return e()}const j=[];function W(e,t=G){let n;const o=new Set;function r(t){if(i=t,((r=e)!=r?i==i:r!==i||r&&"object"==typeof r||"function"==typeof r)&&(e=t,n)){const t=!j.length;for(const t of o)t[1](),j.push(t,e);if(t){for(let e=0;e<j.length;e+=2)j[e][0](j[e+1]);j.length=0}}var r,i}return{set:r,update:function(t){r(t(e))},subscribe:function(i,s=G){const a=[i,s];return o.add(a),1===o.size&&(n=t(r)||G),i(e),()=>{o.delete(a),0===o.size&&n&&(n(),n=null)}}}}const $=W(""),q=W({}),Y=W("Shopify"),J=W(""),z=W(null);let X=!0;try{localStorage.getItem("kp_token"),X=!0}catch(e){X=!1}const Q=W(X),Z=W(null),ee=W(""),te=W(""),ne=W(""),oe=W(""),re=W(!0),ie=W(null),se=W([]),ae=W(!1),ce=W({country_code:"+91",value:""}),ue=W(null),_e=W(null),pe=W(""),le=W(null),de=W(null),he=W(!1),fe=W(!1),me=W(!0),Ee=W(null),ge=W(null),we=W(null),ye=W(!0),be=W("kwikPass");!function(e,t,n){const o=!Array.isArray(e),r=o?[e]:e,i=t.length<2;W(n,(e=>{let n=!1;const s=[];let a=0,c=G;const u=()=>{if(a)return;c();const n=t(o?s[0]:s,e);i?e(n):c="function"==typeof n?n:G},_=r.map(((e,t)=>function(e,...t){if(null==e)return G;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}(e,(e=>{s[t]=e,a&=~(1<<t),n&&u()}),(()=>{a|=1<<t}))));return n=!0,u(),function(){_.forEach(V),c(),n=!1}})).subscribe}([ue,_e],(([e,t],n)=>{(e||t)&&n(JSON.stringify({authPh:e,unAuthPh:t}))}));const Oe=W({country_code:"IN",dial_code:"+91"}),ke=W(!1),Ne={login_autoload:"login_autoload",login_autoload_spin_the_wheel:"login_autoload_spin_the_wheel",login_autoload_bottom_load:"login_autoload_bottom_load",login_autoload_center_load:"login_autoload_center_load",login_autoload_banner_popup:"login_autoload_banner_popup",login_autoload_discount_popup:"login_autoload_discount_popup",login_modal:"login_modal",user_type:"user_type",sso_login:"sso_login",shopify_login_modal:"shopify_login_modal",logged_in_page:"logged_in_page",token_not_found:"token_not_found",cart_token_not_found:"cart_token_not_found",kc_phone_found:"kc_phone_found",sr_phone_found:"sr_phone_found",kc_phone_found_on_sso:"kc_phone_found_on_sso",non_auth_user_identified:"non_auth_user_identified",cart_event:"cart_event",user_id_event:"user_id_event",fbclid_retrieve:"fbclid_retrieve",fbp_and_fbc_source:"fbp_and_fbc_source"},Se={click:"click",click_by_cooee:"click_by_cooee",error:"error",logged_in:"logged_in",automated:"automated",not_found:"not_found",logged_out:"logged_out",mp_email_logged_in:"mp_email_logged_in",found:"found"},Ie={whatsapp_button_clicked:"whatsapp_button_clicked",whatsapp_not_installed:"whatsapp_not_installed",whatsapp_logged_in:"whatsapp_logged_in",close_popup:"close_popup",phone_Number_logged_in:"phone_Number_logged_in",submit_otp:"submit_otp",resend_otp:"resend_otp",verify_otp_error:"verify_otp_error",resend_otp_error:"resend_otp_error",send_otp_error:"send_otp_error",phone_number_edit:"phone_number_edit",phone_number_changed:"phone_number_changed",phone_number_entered:"phone_number_entered",phone_number_autofill:"phone_number_autofill",authenticated_phone_number_autofill:"authenticated_phone_number_autofill",email_entered:"email_entered",dob_entered:"dob_entered",name_entered:"name_entered",phone_entered:"phone_entered",gender_entered:"gender_entered",profession_entered:"profession_entered",true_caller_button_clicked:"true_caller_button_clicked",true_caller_sdk_opened:"true_caller_sdk_opened",true_caller_logged_in:"true_caller_logged_in",true_caller_not_installed:"true_caller_not_installed",true_caller_login_error:"true_caller_login_error",kwikpass_sso_logged_in:"kwikpass_sso_logged_in",checkout_sso_logged_in:"checkout_sso_logged_in",open_login_modal:"open_login_modal",open_login_autoload:"open_login_autoload",shopify_new:"shopify_new",shopify_old:"shopify_old",gokwik_new:"gokwik_new",gokwik_old:"gokwik_old",open_shopify_login_modal:"open_shopify_login_modal",close_shopify_login_modal:"close_shopify_login_modal",email_submitted:"email_submitted",email_edit_button_clicked:"email_edit_button_clicked",forgot_password_failed:"forgot_password_failed",reset_password_send_successfully:"reset_password_send_successfully",non_auth_user_identified_with_expired_token:"non_auth_user_identified_with_expired_token",password_box_opened:"password_box_opened",password_submitted:"password_submitted",shopify_logged_in:"shopify_logged_in",shopify_logged_in_error:"shopify_logged_in_error",success_screen:"success_screen",redirected_to_account_page:"redirected_to_account_page",order_history_button_click:"order_history_button_click",kwikpass_button_click:"kwikpass_button_click",spin_now_click:"spin_now_click",claim_now_click:"claim_now_click",try_again_click:"try_again_click",otp_sent_successfully:"otp_sent_successfully",kc_phone_found_without_kp_token:"kc_phone_found_without_kp_token",kc_phone_found_with_kp_token:"kc_phone_found_with_kp_token",kc_phone_number_autofill:"kc_phone_number_autofill",non_auth_user_identified_with_kc_phone_number:"non_auth_user_identified_with_kc_phone_number",successfully_loggedout:"successfully_loggedout",sso_button_click:"sso_button_click",phone_number_filled:"phone_number_filled",non_auth_user_identified_with_rp_phone_number:"non_auth_user_identified_with_rp_phone_number",non_auth_user_identified_with_idb_phone_number:"non_auth_user_identified_with_idb_phone_number",non_auth_user_identified_with_shopify_app_phone_number:"non_auth_user_identified_with_shopify_app_phone_number",non_auth_user_identified_with_sr_phone_number:"non_auth_user_identified_with_sr_phone_number",non_auth_user_identified_with_non_otp_verified_phone_number:"non_auth_user_identified_with_non_otp_verified_phone_number",non_auth_user_identified_with_guest_phone_number:"non_auth_user_identified_with_guest_phone_number",showed_the_criteria_error:"cred_showed_the_criteria_error",showed_the_criteria_success:"cred_showed_the_criteria_success",redeem_button_clicked:"redeem_button_clicked",user_elgibilble_for_cred:"user_elgibilble_for_cred",user_not_elgibilble_for_cred:"user_not_elgibilble_for_cred",cred_eligibility_api_error:"cred_eligibility_api_error",showed_the_checkout_offers_without_code_success:"showed_the_checkout_offers_without_code_success",showed_the_checkout_offers_code_success:"showed_the_checkout_offers_code_success",showed_the_checkout_offers_without_code_error:"showed_the_checkout_offers_without_code_error",showed_the_checkout_offers_code_error:"showed_the_checkout_offers_code_error",sr_phone_found:"sr_phone_found",non_auth_user_identified_with_no_otp_flow:"non_auth_user_identified_with_no_otp_flow",kp_mp_email_logged_in:"kp_mp_email_logged_in",kp_mp_email_entered:"kp_mp_email_entered",idb_value_found:"idb_value_found",idb_number_found:"idb_number_found",pdp:"pdp",fbclid_retrieve:"fbclid_retrieve",fbp_and_fbc_source:"fbp_and_fbc_source"},Pe={phone_number:"phone_number",email:"email",name:"name",dob:"dob",phone:"phone",profession:"profession",gender:"gender",kc_phone_number:"kc_phone_number",rp_phone_number:"rp_phone_number",sr_phone_number:"sr_phone_number",non_otp_verified_phone_number:"non_otp_verified_phone_number",shopify_app_phone_number:"shopify_app_phone_number",expired_token_phone_number:"expired_token_phone_number",plus_user:"plus_user",non_plus_user:"non_plus_user",user_logged_in:"user_logged_in",email_or_shopify_customerId_not_available:"email_or_shopify_customerId_not_available",error_in_shopify_login_data_api:"error_in_shopify_login_data_api",shopify_login_retry_limit_reached:"shopify_login_retry_limit_reached",manual_shopify_login:"manual_shopify_login",popup_type_id:"popup_type_id",no_otp_flow_phone_number:"no_otp_flow_phone_number",kp_mp_email:"kp_mp_email",idb_phone_number:"idb_phone_number"},ve={EVENTS:{PHONE_NUMBER_AUTOFILL:"kp_phone_number_autofill",MOBILE_ADDED_GK:"kp_mobile_added_gk",CREATE_SHOPIFY_SESSION:"kp_create_shopify_session",WHATSAPP_LOGGED_IN:"kp_whatsapp_logged_in",KWIKPASS_SSO_LOGGED_IN:"kp_kwikpass_sso_logged_in",CHECKOUT_SSO_LOGGED_IN:"kp_checkout_sso_logged_in",TRUECALLER_BUTTON_CLICKED:"kp_truecaller_button_clicked",OPEN_LOGIN_MODAL:"kp_open_login_modal",OPEN_LOGIN_AUTOLOAD:"kp_open_login_autoload",OPEN_SHOPIFY_LOGIN_MODAL:"kp_open_shopify_login_modal",TRUECALLER_NOT_INSTALLED:"kp_truecaller_not_installed",LOGGED_IN_PAGE:"kp_logged_in_page",REDIRECTED_TO_ACCOUNT_PAGE:"kp_redirected_to_account_page",CLOSE_POPUP:"kp_close_popup",SPIN_NOW_CLICKED:"kp_spin_now_clicked",CLAIM_NOW_CLICK:"kp_claim_now_click",TRY_AGAIN_CLICK:"kp_try_again_click",WHATSAPP_BUTTON_CLICKED:"kp_whatsapp_button_clicked",WHATSAPP_NOT_INSTALLED:"kp_whatsapp_not_installed",SUCCESS_SCREEN:"kp_success_screen",SUBMIT_OTP:"kp_submit_otp",PHONE_NUMBER_LOGGED_IN:"kp_phone_number_logged_in",VERIFY_OTP_ERROR:"kp_verify_otp_error",RESEND_OTP:"kp_resend_otp",RESEND_OTP_ERROR:"kp_resend_otp_error",PHONE_NUMBER_EDIT:"kp_phone_number_edit",PHONE_NUMBER_CHANGED:"kp_phone_number_changed",PHONE_NUMBER_ENTERED:"kp_phone_number_entered",EMAIL_ENTERED:"kp_email_entered",DOB_ENTERED:"kp_dob_entered",NAME_ENTERED:"kp_name_entered",PHONE_ENTERED:"kp_phone_entered",PROFESSION_ENTERED:"kp_profession_entered",GENDER_ENTERED:"kp_gender_entered",SEND_OTP:"kp_send_otp",SEND_OTP_ERROR:"kp_send_otp_error",TRUCALLER_SDK_OPENED:"kp_truecaller_sdk_opened",TRUECALLER_LOGGED_IN:"kp_truecaller_logged_in",TRUECALLER_LOGIN_ERROR:"kp_truecaller_login_error",REDIRECTED_TO_ACCOUNT_PAGE:"kp_redirected_to_account_page",ORDER_HISTORY_BUTTON_CLICK:"kp_order_history_button_click",KWIKPASS_BUTTON_CLICK:"kp_kwikpass_button_click",EDIT_EMAIL_BUTTON_CLICKED:"kp_edit_email_button_click",RESET_PASSWORD_SEND_SUCCESSFUL:"kp_reset_password_send_successfully",FORGOT_PASSWORD_FAILED:"kp_forgot_password_failed",KP_NO_OTP_BASED_STRAT:"kp_no_otp_based_strat",EMAIL_SUBMITTED:"kp_email_submitted",SHOPPIFY_LOGGED_IN:"kp_shopify_logged_in",SHOPIFY_LOGIN_ERROR:"kp_shopify_logged_in_error",PASSWORD_BOX_OPENED:"kp_password_box_opened",PASSWORD_SUBMITTED:"kp_password_submitted",LOGOUT_BUTTON_CLICKED:"kp_logout_button_clicked",SUCCESSFULLY_LOGGED_OUT:"kp_successfully_logged_out",EMAIL_OTP_VERIFIED:"kp_email_otp_verified",CART_TOKEN_NOT_FOUND:"cart_token_not_found",KC_PHONE_FOUND_IN_PROMOTIONAL_LINK:"kc_phone_found_in_promotional_link",KC_PHONE_NUMBER_AUTOFILL:"kc_phone_number_autofill",KC_PHONE_NUMBER_SSO:"kc_phone_number_sso",NON_AUTH_USER_IDENTIFIED_WITH_KC_PHONE_NUMBER:"kp_non_auth_user_identified_with_kc_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_RP_PHONE_NUMBER:"kp_non_auth_user_identified_with_rp_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_IDB_PHONE_NUMBER:"kp_non_auth_user_identified_with_idb_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_SR_PHONE_NUMBER:"kp_non_auth_user_identified_with_sr_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_NON_OTP_VERIFIED_PHONE_NUMBER:"kp_non_auth_user_identified_with_non_otp_verified_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_GUEST_PHONE_NUMBER:"kp_non_auth_user_identified_with_guest_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_SHOPIFY_APP_PHONE_NUMBER:"kp_non_auth_user_identified_with_shopify_app_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_NO_OTP_FLOW:"kp_non_auth_user_identified_with_no_otp_flow",NON_AUTH_USER_IDENTIFIED_WITH_EXPIRED_TOKEN_PHONE_NUMBER:"NON_AUTH_USER_IDENTIFIED_WITH_EXPIRED_TOKEN_PHONE_NUMBER",ADD_TO_CART:"add_to_cart"},PROVIDERS:{SNOWPLOW:"snowplow",NETCORE:"netcore",CLEVERTAP:"clevertap",GOOGLE_ANALYTICS:"google_analytics",META_PIXEL:"meta_pixel",WEBENGAGE:"web_engage",MOENGAGE:"mo_engage",POPCLUB:"popclub",EASY_REWARDZ:"easy_rewardz",KlAVIYO:"Klaviyo"}},Te={fingerprinting:"fingerprinting",structured:"structured"};function Re(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ae}=Object.prototype,{getPrototypeOf:De}=Object,Ue=(Ce=Object.create(null),e=>{const t=Ae.call(e);return Ce[t]||(Ce[t]=t.slice(8,-1).toLowerCase())});var Ce;const Le=e=>(e=e.toLowerCase(),t=>Ue(t)===e),Me=e=>t=>typeof t===e,{isArray:Fe}=Array,He=Me("undefined");const xe=Le("ArrayBuffer");const Ke=Me("string"),Be=Me("function"),Ge=Me("number"),Ve=e=>null!==e&&"object"==typeof e,je=e=>{if("object"!==Ue(e))return!1;const t=De(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},We=Le("Date"),$e=Le("File"),qe=Le("Blob"),Ye=Le("FileList"),Je=Le("URLSearchParams");function ze(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,r;if("object"!=typeof e&&(e=[e]),Fe(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let s;for(o=0;o<i;o++)s=r[o],t.call(null,e[s],s,e)}}function Xe(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,r=n.length;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ze=e=>!He(e)&&e!==Qe;const et=(tt="undefined"!=typeof Uint8Array&&De(Uint8Array),e=>tt&&e instanceof tt);var tt;const nt=Le("HTMLFormElement"),ot=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),rt=Le("RegExp"),it=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};ze(n,((n,r)=>{!1!==t(n,r,e)&&(o[r]=n)})),Object.defineProperties(e,o)},st="abcdefghijklmnopqrstuvwxyz",at="0123456789",ct={DIGIT:at,ALPHA:st,ALPHA_DIGIT:st+st.toUpperCase()+at};const ut=Le("AsyncFunction");var _t={isArray:Fe,isArrayBuffer:xe,isBuffer:function(e){return null!==e&&!He(e)&&null!==e.constructor&&!He(e.constructor)&&Be(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Be(e.append)&&("formdata"===(t=Ue(e))||"object"===t&&Be(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&xe(e.buffer),t},isString:Ke,isNumber:Ge,isBoolean:e=>!0===e||!1===e,isObject:Ve,isPlainObject:je,isUndefined:He,isDate:We,isFile:$e,isBlob:qe,isRegExp:rt,isFunction:Be,isStream:e=>Ve(e)&&Be(e.pipe),isURLSearchParams:Je,isTypedArray:et,isFileList:Ye,forEach:ze,merge:function e(){const{caseless:t}=Ze(this)&&this||{},n={},o=(o,r)=>{const i=t&&Xe(n,r)||r;je(n[i])&&je(o)?n[i]=e(n[i],o):je(o)?n[i]=e({},o):Fe(o)?n[i]=o.slice():n[i]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ze(arguments[e],o);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(ze(t,((t,o)=>{n&&Be(t)?e[o]=Re(t,n):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let r,i,s;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)s=r[i],o&&!o(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&De(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ue,kindOfTest:Le,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(Fe(e))return e;let t=e.length;if(!Ge(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:nt,hasOwnProperty:ot,hasOwnProp:ot,reduceDescriptors:it,freezeMethods:e=>{it(e,((t,n)=>{if(Be(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];Be(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return Fe(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Xe,global:Qe,isContextDefined:Ze,ALPHABET:ct,generateString:(e=16,t=ct.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&Be(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(Ve(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const r=Fe(e)?[]:{};return ze(e,((e,t)=>{const i=n(e,o+1);!He(i)&&(r[t]=i)})),t[o]=void 0,r}}return e};return n(e,0)},isAsyncFn:ut,isThenable:e=>e&&(Ve(e)||Be(e))&&Be(e.then)&&Be(e.catch)};function pt(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}_t.inherits(pt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_t.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const lt=pt.prototype,dt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{dt[e]={value:e}})),Object.defineProperties(pt,dt),Object.defineProperty(lt,"isAxiosError",{value:!0}),pt.from=(e,t,n,o,r,i)=>{const s=Object.create(lt);return _t.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),pt.call(s,e.message,t,n,o,r),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};function ht(e){return _t.isPlainObject(e)||_t.isArray(e)}function ft(e){return _t.endsWith(e,"[]")?e.slice(0,-2):e}function mt(e,t,n){return e?e.concat(t).map((function(e,t){return e=ft(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Et=_t.toFlatObject(_t,{},null,(function(e){return/^is[A-Z]/.test(e)}));function gt(e,t,n){if(!_t.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=_t.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!_t.isUndefined(t[e])}))).metaTokens,r=n.visitor||u,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&_t.isSpecCompliantForm(t);if(!_t.isFunction(r))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(_t.isDate(e))return e.toISOString();if(!a&&_t.isBlob(e))throw new pt("Blob is not supported. Use a Buffer instead.");return _t.isArrayBuffer(e)||_t.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,r){let a=e;if(e&&!r&&"object"==typeof e)if(_t.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(_t.isArray(e)&&function(e){return _t.isArray(e)&&!e.some(ht)}(e)||(_t.isFileList(e)||_t.endsWith(n,"[]"))&&(a=_t.toArray(e)))return n=ft(n),a.forEach((function(e,o){!_t.isUndefined(e)&&null!==e&&t.append(!0===s?mt([n],o,i):null===s?n:n+"[]",c(e))})),!1;return!!ht(e)||(t.append(mt(r,n,i),c(e)),!1)}const _=[],p=Object.assign(Et,{defaultVisitor:u,convertValue:c,isVisitable:ht});if(!_t.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!_t.isUndefined(n)){if(-1!==_.indexOf(n))throw Error("Circular reference detected in "+o.join("."));_.push(n),_t.forEach(n,(function(n,i){!0===(!(_t.isUndefined(n)||null===n)&&r.call(t,n,_t.isString(i)?i.trim():i,o,p))&&e(n,o?o.concat(i):[i])})),_.pop()}}(e),t}function wt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function yt(e,t){this._pairs=[],e&&gt(e,this,t)}const bt=yt.prototype;function Ot(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kt(e,t,n){if(!t)return e;const o=n&&n.encode||Ot,r=n&&n.serialize;let i;if(i=r?r(t,n):_t.isURLSearchParams(t)?t.toString():new yt(t,n).toString(o),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}bt.append=function(e,t){this._pairs.push([e,t])},bt.toString=function(e){const t=e?function(t){return e.call(this,t,wt)}:wt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Nt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_t.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},St={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var It={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:yt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Pt(e){function t(e,n,o,r){let i=e[r++];const s=Number.isFinite(+i),a=r>=e.length;if(i=!i&&_t.isArray(o)?o.length:i,a)return _t.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!s;o[i]&&_t.isObject(o[i])||(o[i]=[]);return t(e,n,o[i],r)&&_t.isArray(o[i])&&(o[i]=function(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}(o[i])),!s}if(_t.isFormData(e)&&_t.isFunction(e.entries)){const n={};return _t.forEachEntry(e,((e,o)=>{t(function(e){return _t.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null}const vt={"Content-Type":void 0};const Tt={transitional:St,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=_t.isObject(e);r&&_t.isHTMLForm(e)&&(e=new FormData(e));if(_t.isFormData(e))return o&&o?JSON.stringify(Pt(e)):e;if(_t.isArrayBuffer(e)||_t.isBuffer(e)||_t.isStream(e)||_t.isFile(e)||_t.isBlob(e))return e;if(_t.isArrayBufferView(e))return e.buffer;if(_t.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return gt(e,new It.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return It.isNode&&_t.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=_t.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return gt(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),function(e,t,n){if(_t.isString(e))try{return(t||JSON.parse)(e),_t.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Tt.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&_t.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw pt.from(e,pt.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:It.classes.FormData,Blob:It.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_t.forEach(["delete","get","head"],(function(e){Tt.headers[e]={}})),_t.forEach(["post","put","patch"],(function(e){Tt.headers[e]=_t.merge(vt)}));var Rt=Tt;const At=_t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Dt=Symbol("internals");function Ut(e){return e&&String(e).trim().toLowerCase()}function Ct(e){return!1===e||null==e?e:_t.isArray(e)?e.map(Ct):String(e)}function Lt(e,t,n,o,r){return _t.isFunction(o)?o.call(this,t,n):(r&&(t=n),_t.isString(t)?_t.isString(o)?-1!==t.indexOf(o):_t.isRegExp(o)?o.test(t):void 0:void 0)}class Mt{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(e,t,n){const r=Ut(t);if(!r)throw new Error("header name must be a non-empty string");const i=_t.findKey(o,r);(!i||void 0===o[i]||!0===n||void 0===n&&!1!==o[i])&&(o[i||t]=Ct(e))}const i=(e,t)=>_t.forEach(e,((e,n)=>r(e,n,t)));return _t.isPlainObject(e)||e instanceof this.constructor?i(e,t):_t.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,o,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),o=e.substring(r+1).trim(),!n||t[n]&&At[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=Ut(e)){const n=_t.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(_t.isFunction(t))return t.call(this,e,n);if(_t.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ut(e)){const n=_t.findKey(this,e);return!(!n||void 0===this[n]||t&&!Lt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function r(e){if(e=Ut(e)){const r=_t.findKey(n,e);!r||t&&!Lt(0,n[r],r,t)||(delete n[r],o=!0)}}return _t.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];e&&!Lt(0,this[r],r,e,!0)||(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return _t.forEach(this,((o,r)=>{const i=_t.findKey(n,r);if(i)return t[i]=Ct(o),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();s!==r&&delete t[r],t[s]=Ct(o),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _t.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&_t.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Dt]=this[Dt]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=Ut(e);t[o]||(!function(e,t){const n=_t.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,r){return this[o].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[o]=!0)}return _t.isArray(e)?e.forEach(o):o(e),this}}Mt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_t.freezeMethods(Mt.prototype),_t.freezeMethods(Mt);var Ft=Mt;function Ht(e,t){const n=this||Rt,o=t||n,r=Ft.from(o.headers);let i=o.data;return _t.forEach(e,(function(e){i=e.call(n,i,r.normalize(),t?t.status:void 0)})),r.normalize(),i}function xt(e){return!(!e||!e.__CANCEL__)}function Kt(e,t,n){pt.call(this,null==e?"canceled":e,pt.ERR_CANCELED,t,n),this.name="CanceledError"}_t.inherits(Kt,pt,{__CANCEL__:!0});var Bt=It.isStandardBrowserEnv?{write:function(e,t,n,o,r,i){const s=[];s.push(e+"="+encodeURIComponent(t)),_t.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),_t.isString(o)&&s.push("path="+o),_t.isString(r)&&s.push("domain="+r),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Gt(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Vt=It.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=_t.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function jt(e,t){let n=0;const o=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=o[s];r||(r=c),n[i]=a,o[i]=c;let _=s,p=0;for(;_!==i;)p+=n[_++],_%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-r<t)return;const l=u&&c-u;return l?Math.round(1e3*p/l):void 0}}(50,250);return r=>{const i=r.loaded,s=r.lengthComputable?r.total:void 0,a=i-n,c=o(a);n=i;const u={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:r};u[t?"download":"upload"]=!0,e(u)}}const Wt={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const r=Ft.from(e.headers).normalize(),i=e.responseType;let s;function a(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}_t.isFormData(o)&&(It.isStandardBrowserEnv||It.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const u=Gt(e.baseURL,e.url);function _(){if(!c)return;const o=Ft.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new pt("Request failed with status code "+n.status,[pt.ERR_BAD_REQUEST,pt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),a()}),(function(e){n(e),a()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),kt(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=_:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(_)},c.onabort=function(){c&&(n(new pt("Request aborted",pt.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new pt("Network Error",pt.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||St;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new pt(t,o.clarifyTimeoutError?pt.ETIMEDOUT:pt.ECONNABORTED,e,c)),c=null},It.isStandardBrowserEnv){const t=(e.withCredentials||Vt(u))&&e.xsrfCookieName&&Bt.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===o&&r.setContentType(null),"setRequestHeader"in c&&_t.forEach(r.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),_t.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&"json"!==i&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",jt(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",jt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{c&&(n(!t||t.type?new Kt(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const p=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);p&&-1===It.protocols.indexOf(p)?n(new pt("Unsupported protocol "+p+":",pt.ERR_BAD_REQUEST,e)):c.send(o||null)}))}};_t.forEach(Wt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var $t=e=>{e=_t.isArray(e)?e:[e];const{length:t}=e;let n,o;for(let r=0;r<t&&(n=e[r],!(o=_t.isString(n)?Wt[n.toLowerCase()]:n));r++);if(!o){if(!1===o)throw new pt(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(_t.hasOwnProp(Wt,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!_t.isFunction(o))throw new TypeError("adapter is not a function");return o};function qt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kt(null,e)}function Yt(e){qt(e),e.headers=Ft.from(e.headers),e.data=Ht.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return $t(e.adapter||Rt.adapter)(e).then((function(t){return qt(e),t.data=Ht.call(e,e.transformResponse,t),t.headers=Ft.from(t.headers),t}),(function(t){return xt(t)||(qt(e),t&&t.response&&(t.response.data=Ht.call(e,e.transformResponse,t.response),t.response.headers=Ft.from(t.response.headers))),Promise.reject(t)}))}const Jt=e=>e instanceof Ft?e.toJSON():e;function zt(e,t){t=t||{};const n={};function o(e,t,n){return _t.isPlainObject(e)&&_t.isPlainObject(t)?_t.merge.call({caseless:n},e,t):_t.isPlainObject(t)?_t.merge({},t):_t.isArray(t)?t.slice():t}function r(e,t,n){return _t.isUndefined(t)?_t.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function i(e,t){if(!_t.isUndefined(t))return o(void 0,t)}function s(e,t){return _t.isUndefined(t)?_t.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function a(n,r,i){return i in t?o(n,r):i in e?o(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>r(Jt(e),Jt(t),!0)};return _t.forEach(Object.keys(Object.assign({},e,t)),(function(o){const i=c[o]||r,s=i(e[o],t[o],o);_t.isUndefined(s)&&i!==a||(n[o]=s)})),n}const Xt="1.4.0",Qt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Qt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Zt={};Qt.transitional=function(e,t,n){function o(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,i)=>{if(!1===e)throw new pt(o(r," has been removed"+(t?" in "+t:"")),pt.ERR_DEPRECATED);return t&&!Zt[r]&&(Zt[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,i)}};var en={assertOptions:function(e,t,n){if("object"!=typeof e)throw new pt("options must be an object",pt.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new pt("option "+i+" must be "+n,pt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new pt("Unknown option "+i,pt.ERR_BAD_OPTION)}},validators:Qt};const tn=en.validators;class nn{constructor(e){this.defaults=e,this.interceptors={request:new Nt,response:new Nt}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=zt(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;let i;void 0!==n&&en.assertOptions(n,{silentJSONParsing:tn.transitional(tn.boolean),forcedJSONParsing:tn.transitional(tn.boolean),clarifyTimeoutError:tn.transitional(tn.boolean)},!1),null!=o&&(_t.isFunction(o)?t.paramsSerializer={serialize:o}:en.assertOptions(o,{encode:tn.function,serialize:tn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),i=r&&_t.merge(r.common,r[t.method]),i&&_t.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Ft.concat(i,r);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let _,p=0;if(!a){const e=[Yt.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),_=e.length,u=Promise.resolve(t);p<_;)u=u.then(e[p++],e[p++]);return u}_=s.length;let l=t;for(p=0;p<_;){const e=s[p++],t=s[p++];try{l=e(l)}catch(e){t.call(this,e);break}}try{u=Yt.call(this,l)}catch(e){return Promise.reject(e)}for(p=0,_=c.length;p<_;)u=u.then(c[p++],c[p++]);return u}getUri(e){return kt(Gt((e=zt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}_t.forEach(["delete","get","head","options"],(function(e){nn.prototype[e]=function(t,n){return this.request(zt(n||{},{method:e,url:t,data:(n||{}).data}))}})),_t.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(zt(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}nn.prototype[e]=t(),nn.prototype[e+"Form"]=t(!0)}));var on=nn;class rn{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,r){n.reason||(n.reason=new Kt(e,o,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new rn((function(t){e=t})),cancel:e}}}var sn=rn;const an={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(an).forEach((([e,t])=>{an[t]=e}));var cn=an;const un=function e(t){const n=new on(t),o=Re(on.prototype.request,n);return _t.extend(o,on.prototype,n,{allOwnKeys:!0}),_t.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(zt(t,n))},o}(Rt);un.Axios=on,un.CanceledError=Kt,un.CancelToken=sn,un.isCancel=xt,un.VERSION=Xt,un.toFormData=gt,un.AxiosError=pt,un.Cancel=un.CanceledError,un.all=function(e){return Promise.all(e)},un.spread=function(e){return function(t){return e.apply(null,t)}},un.isAxiosError=function(e){return _t.isObject(e)&&!0===e.isAxiosError},un.mergeConfig=zt,un.AxiosHeaders=Ft,un.formToJSON=e=>Pt(_t.isHTMLForm(e)?new FormData(e):e),un.HttpStatusCode=cn,un.default=un;var _n=un;const pn="GET",ln="PUT",dn="POST",hn="DELETE",fn="PATCH";let mn;J.subscribe((e=>{mn=e}));const En={requestApi:"/v3/session",login:{sendOtpApi:"/v3/gkstrict/auth/otp/send",verifyOtpApi:"/v3/auth/otp/verify",truecaller:"/v3/auth/truecaller/verify",whatsappLogin:"/v3/auth/whatsapp/verify",kwikpassSendOtpApi:"/auth/send-otp",kwikpassVerifyOtpApi:"/auth/verify-otp",whatsappIntentUrl:"/v3/auth/whatsapp/intent-url",createBrowserToken:"/v3/auth/browser",createBrowserTokenForCustomMerchant:"/kp/api/v1/auth/browser",sendOtpApiForCustomMerchant:"/kp/api/v1/auth/otp/send",verifyOtpApiForCustomMerchant:"/kp/api/v1/auth/otp/verify",generateCustomKpToken:"/kp/api/v1/auth/kp-token"},generateToken:"kp/api/v1/auth/generate-token",validateToken:"kp/api/v1/auth/validate-token",getMerchantConfig:"kp/api/v1/configurations",getAutoloadPopupConfig:"kp/api/v1/popup-config",getAllAutoloadConfigList:"kp/api/v1/popup-config/list",createShopifySession:"kp/api/v1/auth/shopify-session",createShopifySessionWithMetaData:"kp/api/v1/customer/shopify-session-with-metafields",createShopifySessionWithMetaForCustom:"kp/api/v1/customer/custom-session-with-metafields",shopifyLoginData:"kp/api/v1/customer/shopify-login",createCustomerLoginTag:"kp/api/v1/customer/tag",updateCustomer:"kp/api/v1/customer",checkIsNewUserInShopify:"kp/api/v1/customer/shopify-session",getAssetsPropertiesUrl:"kp/api/v1/components/merchants",integrateEasyRewardzUrl:"kp/api/v1/integrations/easy-rewardz",integratePopclubUrl:"kp/api/v1/integrations/popclub",integrateFlitsUrl:"/kp/api/v1/integrations/flits-refer",getGkpTokenUrl:"kp/api/v1/auth/core-token/login",getCustomerEmailUrl:"/kp/api/v1/customer/phone",validateEmaiURL:"kp/api/v1/disposable-email/validate",shopifyLoginDataV2URL:"kp/api/v1/customer/shopify-login-data",updateShopifyCustomer:"kp/api/v1/customer/shopify",kwikpassSendOTPOnEmail:"kp/api/v1/auth/send-otp",kwikpassVerifyOTP:"kp/api/v1/auth/verify-otp",decryptPhoneNumber:"kp/api/v1/customer/data",customLogin:"kp/api/v1/customer/custom/login",createUser:"kp/api/v1/customer/custom/create-user",postVisitorIdentification:"/kp/api/v1/fp/v-id",getVisitorIdentification:"/kp/api/v1/fp/g-v-id",getFPcontrols:"/kp/api/v1/fp/cnfgs",incFpCount:"/kp/api/v1/fp/inc",checkoutOffersWithoutCode:"/kp/api/v1/offers/public",checkoutOffersWithCode:"/kp/api/v1/offers/list",orderCount:"/kp/api/v1/customer/order-count",metaS2S:"kp/api/v1/integrations/meta-s2s",validateEmail:"/kp/api/v1/disposable/validate",captureFbclid:"/kp/api/v1/capture",retriveFbclid:"/kp/api/v1/retrieve",capiParamBuilderScript:"https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js",credEligibility:"/kp/api/v1/integrations/cred/eligibility",credCoinpay:"/kp/api/v1/integrations/cred/coinpay",customerIntelligence:"kp/api/v1/customer-intelligence",healthCheck:"/kp/api/v1/health/merchant",getCountryCode:"/kp/api/v1/ct-code",createCustomerWithEmailPopup:"kp/api/v1/customer/marketing-popup-submit",getWebPersonalizationInfo:"kp/api/v1/integrations/web-personalization",getCustomerIntelligence:"kp/api/v1/customer-intelligence?cstmr-mtrcs=billing_pincode",createShopifySessionV2:"kp/api/v2/customer/shopify-session",shopifyLoginDataForCustomAccountV2URL:"kp/api/v2/customer/shopify-login-data",kwikpassVerifyOTPV2:"kp/api/v2/auth/verify-otp",checkEmail:"kp/api/v1/customer/check-email",getKwikAddsCustomEvents:"ka/api/v1/m/op12",metaS2SOpEndpoint:"ka/api/v1/e/op2"},gn={cart:"iglu:com.shopify/cart/jsonschema/1-0-0",fingerprint:"iglu:co.gokwik/fingerprint/jsonschema/1-1-0",product:"iglu:co.gokwik/product/jsonschema/1-1-0",user:"iglu:co.gokwik/user/jsonschema/1-1-0",structured:"iglu:co.gokwik/structured/jsonschema/1-2-0",shopifyAnalytics:"iglu:co.gokwik/shopifyAnalytics/jsonschema/1-0-1"},wn={KP_MERCHANT_CONFIG:"KP_MERCHANT_CONFIG",KP_REQUEST_ID:"kp-request-id",SP_DUID:"SP_DUID",FP_CONTROLS_DATA:"FP_CONTROLS_DATA",KP_META_UID:"KP_META_UID",KP_META_FB_CLICK_ID:"KP_META_FB_CLICK_ID",LOCALIZATION:"localization",KP_MVISIT_COUNT:"KP_MVISIT_COUNT",KP_META_LAST_VISIT:"KP_META_LAST_VISIT",KP_USER_ID:"kp_user_id",KP_UTM_SOURCE:"kp_utm_source",SHOPIFY_SA_P:"shopify_sa_p",KP_SESSION_ID:"kp_session_id"},yn="fingerprinting",bn="structured",On=["_shopify_y","_shopify_s","cart","_landing_page","gk_orig_referrer","gk_landing_page","_shopify_sa_p","_shopify_sa_t","Master_device_id","localization","APISID","SAPISID","MUID"],kn=["category","action","label","property","value","property_1","value_1","property_2","value_2","property_3","value_3","property_4","value_4","property_5","value_5","meta","country_code"],Nn=["value","value_5"],Sn={IS_SSO_LOGIN:"IS_SSO_LOGIN",ACCOUNT_PAGE_LOGIN:"isAccountPageLogin",KP_API_KEY:"KP_API_KEY",SHOPIFY_SESSION_KEY:"_shopify_y",SHOPIFY_REDIRECT_LINK:"SHOPIFY_REDIRECT_LINK",KC_PHONE:"KC_PHONE",IS_EMAIL_REQUIRED:"IS_EMAIL_REQUIRED",unverified_phone_number:"unverified_phone_number",KP_NON_OTP_VERIFIED_USER:"kp_non_otp_verified_user",KP_VISITOR_ID:"kp-v-id",KP_CONFIDENCE_SCORE:"kp-c-score",NOTIFY_PHONE_NUMBER:"notify_phone_number",KP_VISITOR_INFO:"kp-v-info",RP_PHONE_NUMBER:"rp-phone-number",SHOPIFY_COD_UNAUTH_PHONE_NUMBER:"app_unauth_user",AUTOLOAD_POPUP_ID:"autoload-popup-id",AUTOLOAD_POPUP_TYPE:"autoload-popup-type",SR_PHONE_NUMBER:"non_authed_info",VISITOR_ID_SOURCE:"vId_source",VISITED_NETWORK:"vistied_network",KP_TOKEN:"kpToken",SHOPIFY_API_TAGS:"shopify_api_tags",SHOPIFY_API_TAGS_LOGIN_MODAL:"shopify_api_tags_login_modal",EXPIRED_PH_NO:"expired_ph_no",IDB_PH_NO:"idb_ph_no",KP_REQUEST_ID:"kp-request-id"},In="cart_token_not_found",Pn={IS_PAGE_PING_ENABLED:"trk_enbld"},vn="error",Tn="not_found",Rn={CART_TOKEN_NOT_FOUND:"cart_token_not_found"},An="+91";const Dn=e=>{let t=e,n=null;for(;t!==n;)n=t,t=decodeURIComponent(t);return t},Un=(e="notifyph")=>{const t=Mn(e);if(!t)return null;if(t&&!isNaN(t)){if(t?.includes("|")){const e=atob(t).split("|");return{country_code:e[0]||An,value:e[1]}}return{country_code:An,value:t}}if(t){const e=atob(t).split("|");return 1===e?.length?{country_code:An,value:e[0]}:{country_code:e[0],value:e[1]}}},Cn=e=>{const t=document.cookie.split(";").map((e=>e.trim()));for(const n of t){const[t,o]=n.split("=");if(t===e)return o}return null},Ln=e=>{const t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):null},Mn=(e,t=!0)=>{const n=Cn(e);if(null==n){const n=((e,t=!0)=>t&&localStorage.getItem(e))(e,t);return n}return n},Fn=(e,t,n,o)=>{let r="";if(n||o){const e=new Date;n&&e.setDate(e.getDate()+n),o&&e.setTime(e.getTime()+60*o*1e3),r="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+r+"; SameSite=None; Secure; path=/"},Hn=(e={})=>{let t={};return kn.forEach((n=>{e.hasOwnProperty(n)&&(t[n]="meta"===n?e[n]:Nn.includes(n)?Number.parseInt(e[n]):String(e[n]))})),t},xn=()=>{let e=Ln("latitude"),t=Ln("longitude");const n={};return e&&t&&(n.property_4="latitude-longitude",n.value_4=`${e}-${t}`),n};const Kn=()=>{const e=Mn("KWIKSESSIONTOKEN"),t=Un(Sn.unverified_phone_number),n=e?Un():null;const o=Mn(Sn.KC_PHONE),r=Un(Sn.RP_PHONE_NUMBER),i=Un(Sn.SR_PHONE_NUMBER),s=Un(Sn.IDB_PH_NO),a=Un(Sn.EXPIRED_PH_NO),c=Un(Sn.NO_OTP_FLOW_PHONE_NUMBER),u=Un(Sn.SHOPIFY_COD_UNAUTH_PHONE_NUMBER),_=JSON.parse(Mn(Sn.KP_VISITOR_INFO)),p={value:_?.fpPhone,country_code:_?.countryCode||An},l=function(e){let t={};if(e?.includes("|")){const n=e.split("|");t.value=n[0],t.country_code=n[1]}else t.value=e,t.country_code=An;return t}(o),d=_?.authenticated,h=Un(Sn.NOTIFY_PHONE_NUMBER),f=n?.value&&n||a?.value&&a||i?.value&&i||l?.value&&l||p?.value&&p||r?.value&&r||t?.value&&t||h?.value&&h||u?.value&&u||c?.value&&c||s?.value&&s,m=()=>{const o=(()=>{let e=window.navigator.userAgent,t=window.navigator?.userAgentData?.platform,n="";return t||(t=window.navigator.userAgent),-1!==["Macintosh","MacIntel","MacPPC","Mac68K","macOS"].indexOf(t)||t.includes("Macintosh")?n="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)||t.includes("iPhone")||t.includes("iPad")?n="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n="Windows":/Android/.test(e)?n="Android":/Linux/.test(t)&&(n="Linux"),n})();return n?.value?e?null:[{platform:o,type:"non_auth_token_user"}]:a?.value?[{platform:o,type:"expired_token_non_auth_user"}]:i?.value?[{platform:o,type:"sr_non_auth_user"}]:l?.value?[{platform:o,type:"non_auth_user"}]:p?.value?[{platform:o,type:d?"fp_auth_user":"fp_non_auth_user"}]:r?.value?[{platform:o,type:"rp_non_auth_user"}]:t?.value?[{platform:o,type:"non_auth_token_user"}]:h?.value?[{platform:o,type:"non_otp_verified_user"}]:u?.value?[{platform:o,type:"shopify_app_non_auth_user"}]:c?.value?[{platform:o,type:"no_otp_flow_user"}]:s?.value?[{platform:o,type:"idb_non_auth_user"}]:null};if(f?.value)return{phoneNumber:f,type:m()}},Bn=async()=>{const e=Mn("kp_email");let t;if(e){const n=await async function(e){const t=new TextEncoder,n=new TextDecoder;if(!e||(o=e,!o||o.length%4!=0||!/^[A-Za-z0-9+/]+={0,2}$/.test(o)))return e||null;var o;try{const o=t.encode("kR7dmP9tnL2wjH5&vC8qxF4hwQ1iyT6t"),r=t.encode("2134765890213456"),i=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),s=await crypto.subtle.importKey("raw",o,"AES-CBC",!1,["decrypt"]),a=await crypto.subtle.decrypt({name:"AES-CBC",iv:r},s,i);return n.decode(a)}catch(e){return console.error("Decryption failed:",e),null}}(e);t=n}return{phoneData:Kn(),email:t,userId:Mn(wn.KP_USER_ID)}},Gn=()=>!!window?.Shopify?.shop||!!window?.ShopifyAnalytics||!!window?.Shopify?.designMode,Vn=()=>{const e=localStorage.getItem("_kwik_analytics_uid");if(!e)return null;try{let t=atob(e).split("").reverse().join(""),n=atob(t);return JSON.parse(n)}catch(e){return console.error("Decryption failed:",e),null}};const jn=(e=!0)=>{let t={},n=Ko(Sn.KP_REQUEST_ID),o=Cn(wn.KP_SESSION_ID);if(e){const e=document.cookie.split(";").map((e=>e.trim()));for(const n of e){const e=n.split("=");if(2===e.length){const[n,o]=e;if(On.includes(n)&&o){let e=n;n===wn.KP_UTM_SOURCE?e=wn.SHOPIFY_SA_P:n&&n?.startsWith("_")?e=n.slice(1):e===wn.KP_USER_ID&&(e="kookie1"),t[e]=o}}}const n=Date.now(),o=Cn(wn.KP_META_LAST_VISIT);let r;if(o&&(r=function(e,t){const n=new Date(e),o=new Date(t);n.setHours(0,0,0,0),o.setHours(0,0,0,0);const r=Math.abs(o-n);return Math.floor(r/864e5)}(n,+o)),r||0===r){t.kookie2=`${r}`;const e=new CustomEvent("kp_sync_monitor");window.dispatchEvent(e)}}if(n&&(t.request_id=n),o)t.session_id=o;else{const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=crypto.getRandomValues(new Uint8Array(1))[0]%16;return("x"===e?t:3&t|8).toString(16)}));Fn(wn.KP_SESSION_ID,e,null,30),t.session_id=e}return Object.keys(t).length>0?{schema:gn.shopifyAnalytics,data:t}:null};function Wn(e){if(e)return{schema:gn.fingerprint,data:{visitor_id:Dn(e)}}}function $n(e){if(e){const{phoneData:t,email:n}=e;if("e"!==t.phoneNumber?.value){let e={schema:gn.user,data:{phone:`${t.phoneNumber?.value}`,country_code:`${t.phoneNumber?.country_code||"+91"}`,type:t.type}};return n&&(e.data.email=n),e}}}function qn(){const e=function(){const e=window?.ShopifyAnalytics?.meta?.product?.id?`${window?.ShopifyAnalytics?.meta?.product?.id}`:null;let t=document.querySelector("form[action='/cart/add'] input[name='product-id']")?.value||e;const n=document.querySelector(".kp-product-id");if(n){const e=n.getAttribute("data-product-id");e&&(t=e)}if(t){let e=window?.ShopifyAnalytics?.meta?.selectedVariantId?`${window?.ShopifyAnalytics?.meta?.selectedVariantId}`:null,o=document.querySelector("form[action='/cart/add'] input[name='id']")?.value||e;if(n){const e=n?.querySelector('[name="id"]')?.value;e&&(o=e)}const r={product_id:t};return o&&(r.variant_id=o),r}return null}();return e?{schema:gn.product,data:e}:null}function Yn(e,t){let n=null;const o=jn(),r=[];if(o&&r.push(o),e===yn)n={schema:gn.fingerprint,data:t};else{if(e!==bn)return;n={schema:gn.structured,data:Hn({...t,...xn()})}}"function"==typeof window.snowplow?"function"==typeof window.snowplow?window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:n,...window?.Shopify?.shop&&r.length>0&&{context:r}})}catch(e){console.error("error in sendEventToSnowPlow ",e)}})):console.error("Kwik Analytics Error: KwikAnalytics is not defined."):console.error("window.snowplow is not defined")}const Jn=e=>{let t=new RegExp(e+"=([^;]+)").exec(document.cookie);return null!=t?unescape(t[1]):null},zn=e=>{e=e||"_sp_";var t=new RegExp(e+"id\\.[a-f0-9]+=([^;]+);?"),n=document.cookie.match(t);if(n&&n.length>0&&n[1]){var o=n[1].split(".");return{domain_userid:o[0],domain_sessionidx:o[2],domain_sessionid:o[5]}}return!1},Xn=(e,t)=>{console.error(`Error in ${e} cart token`,t);const{response:n}=t||{},o=n?.data,r=n?.status;Yn({category:In,action:vn,label:`Error in ${e} cart with error_code ${r}`,property:o?t?.stack?`Error in ${e} cart with error_code ${r}`:"NA":"NA",analyticEvent:Rn.CART_TOKEN_NOT_FOUND})},Qn=async e=>{let t=null,n=null,o=null;try{const{data:e}=await _n.get("/cart.js");n=e,t=e?.token}catch(e){Xn("getting",e)}if(!t)try{o=(await _n.post("/cart/update.json",{attributes:{domain_userid:e,network_userid:Jn("sp")||null,domain_sessionid:zn().domain_sessionid||null}},{headers:{"Content-Type":"application/json",Accept:"application/json"}})).data,t=o?.token}catch(e){Xn("updating",e)}return t||Yn({category:In,action:Tn,label:n?JSON.stringify(n):"NA",property:o?JSON.stringify(o):"NA",analyticEvent:Rn.CART_TOKEN_NOT_FOUND}),t};async function Zn(e){let t=await Qn(e);if(t)return{schema:gn.cart,data:{id:t,token:t}}}function eo(){const e=Ln(Pn.IS_PAGE_PING_ENABLED);if(e){const t=parseInt(e.minimumVisitLength),n=parseInt(e.heartbeatDelay);window.snowplow("enableActivityTracking",{minimumVisitLength:t,heartbeatDelay:n})}}async function to(e=null){Gn()&&!e?.type?async function(){console.debug("setAttributeAndTrackPageView for shopify merchants only");let e=await Bn();e?.phoneData?.phoneNumber?.value||(e=Vn()),e?.userId&&window.snowplow("setUserId",e?.userId),window.snowplow((async function(){let t=this.gkwkkp.getDomainUserId();t&&Fn(wn.SP_DUID,t);let n=[],o=await Zn(t);if(o&&n.push(o),Gn()){const e=jn();e&&n.push(e)}const r=Wn(Mn(Sn.KP_VISITOR_ID));r&&n.push(r);const i=$n(e);i&&n.push(i);const s=qn();s&&n.push(s),console.debug("Page View Context"),eo(),n.length?window.snowplow("trackPageView:gkwkkp",{context:n}):window.snowplow("trackPageView:gkwkkp")}))}():e&&async function(e){console.debug("setAttributeAndTrackPageViewForCustomMerchants");let t=await Bn();t?.phoneData?.phoneNumber?.value||(t=Vn());let n=t?.userId;n&&window.snowplow("setUserId",n),window.snowplow((async function(){let n=this.gkwkkp.getDomainUserId();n&&Fn(wn.SP_DUID,n);let o=[];const r=$n(t);r&&o.push(r);const i=Wn(Mn(Sn.KP_VISITOR_ID));i&&o.push(i);const s=jn(Gn());s&&o.push(s),e?.data?.cart_id&&o.push({schema:gn.cart,data:{id:String(e.data.cart_id),token:String(e.data?.cart_id)}}),e?.data&&delete e.data.cart_id;let a={};"product"===e?.type&&e?.data?(e.data?.product_id&&(a.product_id=String(e.data.product_id)),e.data?.image_url&&(a.img_url=String(e.data.image_url)),e.data?.variant_id&&(a.variant_id=String(e.data.variant_id)),e.data?.name&&(a.product_name=String(e.data.name)),e.data?.price&&(a.product_price=String(e.data.price)),e.data?.product_currency&&(a.product_currency=String(e.data.product_currency)),e.data?.handle&&(a.product_handle=String(e.data.handle).substring(0,250))):"collection"===e?.type&&e?.data?(e.data?.collection_id&&(a.collection_id=String(e.data.collection_id)),e.data?.image_url&&(a.img_url=String(e.data.image_url)),e.data?.name&&(a.collection_name=String(e.data.name).substring(0,250)),e.data?.handle&&(a.collection_handle=String(e.data.handle).substring(0,250))):"cart"===e?.type&&e?.data&&(e?.data?.cart_id&&(a.cart_id=String(e.data.cart_id)),e?.data?.product_id&&(a.product_id=String(e.data.product_id)),e?.data?.variant_id&&(a.variant_id=String(e.data.variant_id)),e?.data?.image_url&&(a.image_url=String(e.data.image_url)),e?.data?.name&&(a.name=String(e.data.name)),e?.data?.price&&(a.price=String(e.data.price)),e?.data?.handle&&(a.handle=String(e.data.handle)),e?.data?.product_quantity&&(a.product_quantity=String(e.data.product_quantity))),e?.type&&o.push({schema:gn.product,data:{...a,type:e.type}}),console.debug("Page View Context"),eo(),o.length?window.snowplow("trackPageView:gkwkkp",{context:o}):window.snowplow("trackPageView:gkwkkp")}))}(e)}function no(e){return{schema:gn.structured,data:Hn({...e,...xn()})}}function oo(e,t){"function"==typeof window.snowplow?window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:e,context:t})}catch(e){console.error("error in sendEventToSnowPlow ",e)}})):console.error("Kwik Analytics Error: KwikAnalytics is not defined.")}const ro=async e=>{let t=[],n=await Bn();n?.phoneData?.phoneNumber?.value||(n=Vn());const o=$n(n);o&&t.push(o);const r=qn();r&&t.push(r);let i=Cn(wn.SP_DUID),s=await Zn(i);s&&t.push(s);const a=Kn();let c={...no({category:"cart_event",label:"add_to_cart",action:"click",value:a?.phoneNumber?.value,country_code:a?.phoneNumber?.country_code||"+91"})};let u={...no({category:"cart_event",label:"cart_update",action:"click",value:a?.phoneNumber?.value,country_code:a?.phoneNumber?.country_code||"+91"})};const _=jn();_&&t.push(_),e&&oo(c,t),oo(u,t)},io=()=>{let e=!0;try{const t=window.fetch;window.fetch=async function(...n){const[o,r]=n;if("string"==typeof o&&(o.includes("/cart/add")||o.includes("/cart/update.js")||o.includes("/cart/change.js"))&&"POST"===r?.method?.toUpperCase()){e=o.includes("/cart/add");const r=await t.apply(this,n);return r.clone().json().then((async t=>{await ro(e)})).catch((()=>{})),r}return t.apply(this,n)};const n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(t,o,...r){return e=o.includes("/cart/add"),this._isCartModificationRequest="POST"===t&&(o.includes("/cart/add")||o.includes("/cart/update.js")||o.includes("/cart/change.js")),n.apply(this,[t,o,...r])},XMLHttpRequest.prototype.send=function(t){return this._isCartModificationRequest&&this.addEventListener("load",(async function(){await ro(e)})),o.apply(this,[t])}}catch(e){console.error("Error on sp cart monitor")}};const so={init:function(e=null){if(!(e=>e?(window.kwik_analytics_app_id=e,!1):(console.error("Kwik analytics app id not defined"),!0))(window?.merchantInfo?.mid||e))return new Promise(((e,t)=>{try{n=window,o=document,r="script",n[i="snowplow"]?e():(n.GlobalSnowplowNamespace=n.GlobalSnowplowNamespace||[],n.GlobalSnowplowNamespace.push(i),n[i]=function(){(n[i].q=n[i].q||[]).push(arguments)},n[i].q=n[i].q||[],s=o.createElement(r),a=o.getElementsByTagName(r)[0],s.async=1,s.src="https://cdn.jsdelivr.net/npm/@snowplow/javascript-tracker@3.15.0/dist/sp.min.js",a.parentNode.insertBefore(s,a),s.onload=e,s.onerror=t),async function(e){if(!window.snowplow)return console.error("Snowplow not loaded"),!1;try{const e=window?.merchantInfo?.mid||window?.kwik_analytics_app_id,t="gokwikproduction.kwikpass.gokwik.in"?.includes(e)?"gokwikproduction.kwikpass.gokwik.in":"sp-kf-collector-prod.gokwik.io";return window.snowplow("newTracker","gkwkkp",t||"sp-kf-collector-prod.gokwik.io",{appId:`${e}`,discoverRootDomain:!0,cookieSameSite:"Lax",contexts:{webPage:!0,performanceTiming:!0}}),await to(),!0}catch(e){return console.error("Error initializing Snowplow tracker:",e),!1}}(),Gn()&&io()}catch(e){t(e)}var n,o,r,i,s,a}))},trackPageViewEvent:to,trackEvent:async e=>{const t=[];let n=await Bn();n?.phoneData?.phoneNumber?.value||(n=Vn());let o={category:e?.category,label:e?.name,action:e?.action,...e?.attributes&&Object.keys(e.attributes).length>0&&{meta:e?.attributes}};n?.phoneData?.phoneNumber?.value&&(o.property="phoneNumber",o.value=n?.phoneData?.phoneNumber?.value,o.country_code=n?.phoneData?.phoneNumber?.country_code),o={...o};let r={...no(o)};if(Gn()){const e=jn();e&&t.push(e)}if(n){const e=$n(n);e&&t.push(e)}"function"==typeof window.snowplow?window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:r,context:t})}catch(e){console.error("Error in Kwik Analytics tracking:",e)}})):console.error("Kwik Analytics Error: KwikAnalytics is not defined.")},userLogin:async function(e){const{phone:t,email:n}=e,o=[];let r={category:e?.type,label:e?.name,action:e?.action};if((e=>{let{phone:t,country_code:n,email:o}=e;const r={phoneData:{phoneNumber:{value:t,country_code:n||An},type:null},email:o};if(t||o){let e=JSON.stringify(r),t=btoa(e).split("").reverse().join(""),n=btoa(t);localStorage.setItem("_kwik_analytics_uid",n)}})(e),e?.phone){let i={schema:gn.user,data:{phone:`${t}`,type:null}};n&&(i.data.email=n),i&&o.push(i),r.property="phoneNumber",r.value=e?.phone}let i={...no(r)};if(Gn()){const e=jn();e&&o.push(e)}"function"==typeof window.snowplow?window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:i,context:o})}catch(e){console.error("error in Kwik Analytics ",e)}})):console.error("Kwik Analytics Error: KwikAnalytics is not defined.")},sendCustomEvent:Yn};"undefined"!=typeof window&&(window.KwikAnalytics=so);const ao=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT];const co=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT],uo=(e,t)=>{const n=t?.rules?.phoneFormat??b;let o;"phone"!==t?.identifier&&t?.identifier?"email"===t?.identifier?o=e?.email:"customer_id"===t?.identifier&&(o=e?.customer_id):o=e?.phone&&`${n}${e.phone}`;let r={type:"userLogin",data:{Site:{Phone:e?.phone&&`${n}${e.phone}`,phone_no:e?.phone&&`${n}${e.phone}`,mobile_no:e?.phone&&`${n}${e.phone}`,Identity:o,"MSG-email":!0,"MSG-push":!0,"MSG-sms":!0,"MSG-whatsapp":!0}}};o&&clevertap.onUserLogin.push(r.data)};const _o=[ve.EVENTS.WHATSAPP_LOGGED_IN,ve.EVENTS.PHONE_NUMBER_LOGGED_IN,ve.EVENTS.TRUECALLER_LOGGED_IN,ve.EVENTS.SHOPPIFY_LOGGED_IN],po=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT];const lo=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT];const ho=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT];const fo=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT];const mo=[ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT],Eo=(e,t)=>{const n=t?.rules?.phoneFormat??b;let o;"phone"!==t?.identifier&&t?.identifier?"email"===t?.identifier?o=e?.email:"customer_id"===t?.identifier&&(o=e?.customer_id):o=e?.phone&&`${n}${e.phone}`;const r={$email:e?.email,$phone_number:`${n}${e.phone}`};o&&klaviyo.push(["identify",r])},go=(e,t,n)=>{const o={data:{type:"subscription",attributes:{profile:{data:{type:"profile",attributes:{phone_number:n}}}},relationships:{list:{data:{type:"list",id:t}}}}};fetch(`https://a.klaviyo.com/client/subscriptions?company_id=${e}`,{method:"POST",headers:{revision:"2024-10-15","Content-Type":"application/vnd.api+json"},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>console.log("Success"))).catch((e=>console.error("Error:",e)))};let wo,yo=[];se.subscribe((e=>{yo=e})),de.subscribe((e=>wo=e));const bo=[ve.EVENTS.WHATSAPP_LOGGED_IN,ve.EVENTS.PHONE_NUMBER_LOGGED_IN,ve.EVENTS.TRUECALLER_LOGGED_IN,ve.EVENTS.SHOPPIFY_LOGGED_IN,ve.EVENTS.SUCCESSFULLY_LOGGED_OUT];function Oo(e){const{analyticEvent:t,category:n,label:r,action:i}=e,s=e?.category||e?.modalType?.toLowerCase();if(e.customer_id=wo||localStorage.getItem("kp_customer_id"),delete e.analyticEvent,n&&r&&i&&so.sendCustomEvent(Te.structured,e),n!==Ne.sso_login){const n=(new Date).toISOString();e.phone=e.value?e.value:null,delete e.value,yo?.forEach((r=>{r.name===ve.PROVIDERS.NETCORE&&bo.includes(t)&&function(e,t,n,o){const r=n?.rules?.phoneFormat;try{let i=t?.mail;"email"===n?.identifier?i=t?.mail:"phone"===n?.identifier?i=t?.phone&&`${r}${t.phone}`:"customer_id"===n?.identifier&&(i=t?.customer_id),i&&smartech("identify",i),o&&!ao.includes(e)&&o!==U.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?smartech("dispatch",e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&smartech("dispatch",e,t)}catch(e){console.error("Error While Sending Event To Netcore",e)}}(t,e,r,s),r.name===ve.PROVIDERS.CLEVERTAP&&bo.includes(t)&&(e.Date=n,function(e,t,n,o){try{uo(t,n),o&&!co.includes(e)&&o!==U.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?clevertap.event.push(e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&clevertap.event.push(e,t)}catch(e){console.error("Error While Sending Event To Clevertap",e)}}(t,e,r,s)),r.name===ve.PROVIDERS.MOENGAGE&&bo.includes(t)&&(e.Date=n,function(e,t,n,o){const r=n?.rules?.phoneFormat;try{let i=t?.phone&&`${r}${t.phone}`;"email"===n?.identifier?i=t?.mail:"phone"===n?.identifier?i=t?.phone&&`${r}${t.phone}`:"customer_id"===n?.identifier&&(i=t?.customer_id),i&&_o.includes(e)&&Moengage.add_unique_user_id(i),o&&o!==U.LOGIN_MODAL&&!po.includes(e)&&n?.marketingEvents?.includes(e)?Moengage.track_event(e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&Moengage.track_event(e,t),e==ve.EVENTS.SUCCESSFULLY_LOGGED_OUT&&Moengage.destroy_session()}catch(e){}}(t,e,r,s)),r.name===ve.PROVIDERS.WEBENGAGE&&bo.includes(t)&&(e.Date=n,function(e,t,n,o){const r=n?.rules?.phoneFormat??b;try{let i=Object.fromEntries(Object.entries(t).filter((([e,t])=>null!=t)));const{phone:s,email:a}=i;s&&((!n?.identifier||"phone"===n?.identifier)&&webengage.user.login(`${r}${s}`),webengage.user.setAttribute("we_phone",`${r}${s}`)),a&&("email"===n?.identifier&&webengage.user.login(a),webengage.user.setAttribute("we_email",a)),webengage.user.setAttribute("user_tag","kwikPass"),o&&!lo.includes(e)&&o!==U.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?webengage.track(e.replace("kp_","kp_mp_"),i):n?.events?.includes(e)&&webengage.track(e,i)}catch(e){console.error("Error While Sending Event To WebEngage",e)}}(t,e,r,s)),r.name===ve.PROVIDERS.GOOGLE_ANALYTICS&&bo.includes(t)&&function(e,t,n,o){try{o&&!ho.includes(e)&&o!==U.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?gtag("event",e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&gtag("event",e,t)}catch(e){console.error("Error While Sending Event To Netcore",e)}}(t,e,r,s),r.name===ve.PROVIDERS.META_PIXEL&&bo.includes(t)&&function(e,t,n,o){try{o&&!fo.includes(e)&&o!==U.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?fbq("trackCustom",e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&fbq("trackCustom",e,t)}catch(e){console.error("Error While Sending Event To MetaPixel",e)}}(t,e,r,s),r.name===ve.PROVIDERS.KlAVIYO&&bo.includes(t)&&(e.isNotificationChecked=JSON.parse(xo(o.kp_notification_checked)),function(e,t,n,o){const r=n?.rules?.phoneFormat??b,{isNotificationChecked:i}=t,{token:s,list_id:a}=n?.config;try{const c={phone_number:`${r}${t.phone}`,email:t.email};Eo(t,n),o&&o!==U.LOGIN_MODAL&&!mo.includes(e)&&n?.marketingEvents?.includes(e)?klaviyo.push(["track",e.replace("kp_","kp_mp_"),c]):n?.events?.includes(e)&&klaviyo.push(["track",e,c]),i&&s&&a&&go(s,a,c.phone_number)}catch(e){console.error("Error While Sending Event To Klaviyo",e)}}(t,e,r,s))}))}}const ko=new class{constructor(e,t={},n={},o={},r={}){this.baseURL=e,this.auth=t,this.headers=n,this.params=o,this.data=r}async makeRequest(e=pn,t,n={},o={},r={}){try{const i={url:t,method:e,headers:{...this.headers,...r,"kp-integration-type":mn},baseURL:this.baseURL,params:{...this.params,...n},data:o};o&&"object"==typeof o&&0===Object.keys(o).length&&(i.data=null);const s=await _n(i);return{status:s.status,headers:s.headers,body:s.data}}catch(e){throw e}}get(e,t,n,o){return this.makeRequest(pn,e,t,n,o)}post(e,t,n,o){return this.makeRequest(dn,e,t,n,o)}put(e,t,n,o){return this.makeRequest(ln,e,t,n,o)}delete(e,t,n,o){return this.makeRequest(hn,e,t,n,o)}patch(e,t,n,o){return this.makeRequest(fn,e,t,n,o)}}("https://gkx.gokwik.co");let No;async function So(e,n,o,r){try{const i=Ko(t.KP_REQUEST_ID),s={[d]:e,[h]:e,[m]:No||i||D,[E]:i||D,trigger:r};n&&(s[f]=n),o&&(s[g]=o);return await ko.get(En.validateToken,{},{},s)}catch(e){return function(e,t=!1){const{response:n}=e,o=n?.data?.error;if(401===n?.status&&t)return handleLogout();if(403===n?.status&&o===C.something_went_worng){const e=new CustomEvent("kp-health",{detail:{status:!1}});window.dispatchEvent(e)}if(o)return{status:n.status,message:o};throw e}(e)}}se.subscribe((e=>{})),pe.subscribe((e=>e)),q.subscribe((e=>e)),le.subscribe((e=>{e&&(No=e)})),ke.subscribe((e=>{})),z.subscribe((e=>e));const Io="kp_sso_token_for_custom_merchant",Po="kp_sso_token",vo="store_visitor_information",To="process_fingerprinting",Ro="IDB_TOKEN_FOUND";Ee.subscribe((e=>e)),ge.subscribe((e=>e)),Y.subscribe((e=>e)),J.subscribe((e=>e)),we.subscribe((e=>e)),ie.subscribe((e=>e)),Oe.subscribe((e=>e)),ye.subscribe((e=>e)),fe.subscribe((e=>e)),ye.subscribe((e=>e)),he.subscribe((e=>e));const Ao="KP_DB",Do="kp_storage",Uo=1;function Co(){return new Promise(((e,t)=>{const n=indexedDB.open(Ao,Uo);n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(Do)||t.createObjectStore(Do)},n.onsuccess=()=>{e(n.result)},n.onerror=()=>{t(n.error)}}))}async function Lo(e,n,o){const r=(await Co()).transaction(Do,"readonly").objectStore(Do);let i=0;if(!e(Fo())){const e=await async function(e,t){return new Promise(((n,o)=>{const r=e.get(t);r.onsuccess=()=>n(r.result),r.onerror=()=>o(r.error)}))}(r,Fo());if(e){const n={key:Fo(),value:e};window.self!==window.top?Ho({type:Ro,payload:n},o):getValueFromCookiesOrLocalStorage(t.IDB_PH_NO)||async function(e){const{key:n,value:o}=e;if(!n||!o)return;const r=o,i=await So(window.merchantInfo?.mid,null,r,"idb-ph");let s=i?.body?.data?.phone,a=i?.body?.data?.country_code||b;if(!s)return;Wo(`${a}|${s}`,t.IDB_PH_NO),Oo({category:Ne.non_auth_user_identified,action:Se.automated,label:Ie.non_auth_user_identified_with_idb_phone_number,property:Pe.idb_phone_number,value:s,country_code:a,analyticEvent:ve.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_IDB_PHONE_NUMBER})}(n),i++}}return i}let Mo;J.subscribe((e=>e)),te.subscribe((e=>e)),ce.subscribe((e=>e)),$.subscribe((e=>Mo=e)),Z.subscribe((e=>e)),q.subscribe((e=>e)),be.subscribe((e=>e)),ee.subscribe((e=>e)),ne.subscribe((e=>e)),Q.subscribe((e=>e)),oe.subscribe((e=>e)),re.subscribe((e=>{})),Y.subscribe((e=>e)),J.subscribe((e=>e)),me.subscribe((e=>e)),Ee.subscribe((e=>e)),ge.subscribe((e=>e)),we.subscribe((e=>e)),ae.subscribe((e=>{})),ke.subscribe((e=>e)),new TextEncoder,new TextDecoder;const Fo=()=>"KWIKSESSIONTOKEN",Ho=(e,t)=>{t&&0===Mo.length&&($.set(t),Mo=t),"string"==typeof e&&(e={type:e}),window.parent.postMessage(e,Mo)};const xo=e=>{const t=document.cookie.split(";").map((e=>e.trim()));for(const n of t){const[t,o]=n.split("=");if(t===e)return o}return null},Ko=(e,t=!0)=>t&&localStorage.getItem(e),Bo=(e,t,n=!0)=>{n&&localStorage.setItem(e,t)},Go=(e,t=!0)=>{const n=xo(e);if(null==n){return Ko(e,t)}return n},Vo=(e,t,n=!0,o=365,r=!1)=>{((e,t,n,o=!1,r)=>{let i="",s="";if(n||r){const e=new Date;n&&e.setDate(e.getDate()+n),r&&e.setTime(e.getTime()+60*r*1e3),i="; expires="+e.toUTCString()}o&&(s=";domain=pdp.gokwik.co"),document.cookie=e+"="+(t||"")+i+"; SameSite=None; Secure; path=/"+s})(e,t,o,r),Bo(e,t,n),e===Fo()&&async function(e,t){const n=(await Co()).transaction(Do,"readwrite");n.objectStore(Do).put(t,e),n.complete||new Promise(((e,t)=>{n.oncomplete=e,n.onerror=t}))}(e,t)},jo=(e,t=!0,n=!1)=>{!function(e,t=!1){let n="";t&&(n=";domain=pdp.gokwik.co"),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; SameSite=None; Secure; path=/"+n}(e,n),((e,t=!0)=>{t&&localStorage.removeItem(e)})(e,t),e===Fo()&&async function(e){const t=(await Co()).transaction(Do,"readwrite");t.objectStore(Do).delete(e),t.complete||new Promise(((e,n)=>{t.oncomplete=e,t.onerror=n}))}(e)};(e=>{const t=parseFloat(16);(e/t).toFixed(3)&&"NaN"!=(e/t).toFixed(3)&&(e/t).toFixed(3)})(14);const Wo=(e,t="notifyph",n=!0,o=365,r=!1)=>{e&&!e?.includes("|")&&(e=`+91|${e}`);const i=btoa(e);Vo(t,i,n,o,r),window?.merchantInfo?.mid&&Xo()},$o=(e="notifyph")=>{const t=Go(e);if(!t)return null;if(t&&!isNaN(t)){if(t?.includes("|")){const e=atob(t).split("|");return{country_code:e[0]||b,value:e[1]}}return{country_code:b,value:t}}if(t){const e=atob(t).split("|");return 1===e?.length?{country_code:b,value:e[0]}:{country_code:e[0],value:e[1]}}};function qo(e){let t=e,n=null;for(;t!==n;)n=t,t=decodeURIComponent(t);return t}const Yo=(e,n,o,r=!1)=>{const i=n;if(!i)return;const s=Go(t.VISITED_NETWORK,e);let a=s?JSON.parse(s):[];const c=a.findIndex((e=>e.id===i));let u=0;if(-1===c)return o?(a.push({id:i,updatedAt:Date.now(),kp_count:o||1}),Vo(t.VISITED_NETWORK,JSON.stringify(a),e,365,!0),null):(a.push({id:i,updatedAt:Date.now(),kp_count:1}),Vo(t.VISITED_NETWORK,JSON.stringify(a),e,365,!0),1);{let n=a[c];if(u=n.kp_count+1,(o||r)&&(a[c]={...n,updatedAt:Date.now(),kp_count:u},Vo(t.VISITED_NETWORK,JSON.stringify(a),e,365,!0)),r||o&&u>o)return u}return null},Jo=({mid:e=null})=>{const n=Go(Fo());if(n){return{phoneNumber:n?$o():null,source:O}}const o=JSON.parse(Go(t.KP_VISITOR_INFO)),r=o?.authenticated,i={value:o?.fpPhone,country_code:o?.countryCode||b};if(i?.value&&r)return{phoneNumber:i,source:k}},zo=()=>{const e=$o(t.EXPIRED_PH_NO);if(e?.value)return{phoneNumber:e,source:R};const n=$o(t.SR_PHONE_NUMBER);if(n?.value)return{phoneNumber:n,source:I};const o=function(e){let t={};if(e?.includes("|")){const n=e.split("|");t.value=n[0],t.country_code=n[1]}else t.value=e,t.country_code=b;return t}(Go(t.KC_PHONE));if(o?.value)return{phoneNumber:o,source:N};const r=JSON.parse(Go(t.KP_VISITOR_INFO)),i={value:r?.fpPhone,country_code:r?.countryCode||b},s=r?.authenticated;if(i.value&&!s)return{phoneNumber:i,source:k};const a=$o(t.RP_PHONE_NUMBER);if(a?.value)return{phoneNumber:a,source:S};const c=$o(t.unverified_phone_number);if(c?.value)return{phoneNumber:c,source:A};const u=$o(t.NO_OTP_FLOW_PHONE_NUMBER);return u?{phoneNumber:u,source:T}:null},Xo=()=>{const e=window?.merchantInfo?.mid,t=zo();if(_e.set(t),!e)return;const n=Jo({mid:e});ue.set(n)},Qo=e=>!!(e&&e.length>15);const Zo={},er={},tr=3e5;let nr;window.addEventListener("message",(async o=>{if("process-sso"===o.data.type){let{event:h,kcPhone:f,isLogout:m,kpCoreToken:E,mid:g,nonAuthedInfo:y,requestId:A,appUnauthPhoneNumber:D,queryparams:U,userId:C,mCount:L,mKpCount:M}=o.data,F=document.referrer||"*";nr=o.data.nonOtpVerifiedPhone;const H=$o("kpUnauthPhoneNumber")||D;let x,K,B,G,V=$o(t.RP_PHONE_NUMBER),j=$o(t.EXPIRED_PH_NO);A&&Bo(t.KP_REQUEST_ID,A);try{localStorage.getItem("token");x=!0}catch(e){x=!1}if(h===n&&(V={value:o?.data[t.RP_PHONE_NUMBER],country_code:b},Wo(`${V?.country_code}|${V?.value}`,t.RP_PHONE_NUMBER,x,365,!0),!g))return;let W=Go("whatsapp_token",x),$=Go("KWIKPASSTOKEN",x),q=Go("KWIKUSERTOKEN",x),Y=Go(Fo(),x),J=Go("userType",x);if(h===l&&L&&C){let e=Yo(x,C,L);return void window.parent.postMessage({kpCount:e,userId:C},"*")}if(h===l&&M&&C){const e=Go(t.VISITED_NETWORK,x);let n=e?JSON.parse(e):[];const o=n.findIndex((e=>e.id===C));if(-1!==o){let e=n[o]?.kp_count;if(e>M)return void window.parent.postMessage({kpCount:e,userId:C},"*")}}if(h===_&&U){const e=U;return e.kp_core_token&&Vo(Fo(),e.kp_core_token,x,365,!0),e.token&&Vo("KWIKUSERTOKEN",e.token,x,365,!0),void(e.GK_LOGIN_SOURCE&&Vo(w,e?.GK_LOGIN_SOURCE))}((e=!0)=>{const n=JSON.parse(Go(t.KP_VISITOR_INFO,e));n&&"e"===n?.fpPhone&&jo(t.KP_VISITOR_INFO,e)})(x);let z=o?.data?.visitorId;if(h===vo){let e=o?.data?.visitorInfo;if(!e)return;if(e?.visitorId&&Vo(t.KP_VISITOR_ID,qo(e?.visitorId),x,30,!0),e?.fpPhone){B=e?.fpPhone;const n={fpPhone:e?.fpPhone,authenticated:e?.authenticated||!1,countryCode:e?.countryCode||b};Vo(t.KP_VISITOR_INFO,JSON.stringify(n),x)}return}if(Y&&!Qo(Y)&&(jo(Fo(),x),q&&jo("KWIKUSERTOKEN",x),Y=null,q=null),q&&!Qo(q)&&(jo("KWIKUSERTOKEN",x),q=null),Y){const e=await async function(e,t,n,o){const r=function(e,t,n,o){return`${e}:${t||""}:${n||""}:${o||""}`}(e,t,n,o),i=Zo[r],s=Date.now();if(i&&s-i.timestamp<tr)return i.response;const a=await So(e,t,n,o);return Zo[r]={timestamp:s,response:a},a}(g,q,Y,"sso");if(d=e?.status,[200,201].includes(d)){const{data:n}=e?.body;if(K=n?.coreToken?.isValid,K&&n?.coreToken?.jwe&&(n?.coreToken?.jwe!==Y&&Vo(Fo(),n?.coreToken?.jwe,x,365,!0),Y=n?.coreToken?.jwe),!n?.coreToken?.isValid){const e=n.country_code||b;n?.phone&&Wo(`${e}|${n.phone}`,n?.coreToken?.isExpired?t.EXPIRED_PH_NO:t.unverified_phone_number,x,365,!0),n?.coreToken?.isExpired&&(j={value:n?.phone,country_code:e}),Y=null}if(q&&!n?.token?.isValid?(jo("KWIKUSERTOKEN",x,!0),q=null):n?.token?.jwe&&(Vo("KWIKUSERTOKEN",n?.token?.jwe,x,365,!0),q=n.token.jwe),K&&n?.phone){const e=n.country_code||b;G={value:n.phone,country_code:e},Wo(`${e}|${n.phone}`,"notifyph",x,365,!0)}}}let X=((e=!0)=>{const t=Go(w,e);return t?.length>0?t:"existing"})(x);y?.value&&Wo(`${y?.country_code}|${y.value}`,t.SR_PHONE_NUMBER,x),Y&&(G=$o());let Q=!1;Go(e,x)&&(Q=!0),jo(e,x,!0);let{kpCount:Z,newUserId:ee}=or(C,x,L);if(Y&&(!Y||K)||h!==Po&&h!==Io||window.parent.postMessage({type:p,is_core_token:!1,userId:ee,kpCount:Z},"*"),h===To){!Go(t.KP_VISITOR_ID,x)&&z&&Vo(t.KP_VISITOR_ID,qo(z),x,30,!0),z&&(z=qo(z)),async function(e,n,o,r,i,s,a,c){const u=JSON.parse(Go(t.KP_VISITOR_INFO,i)),_={value:u?.fpPhone,country_code:u?.countryCode||b},p=u?.authenticated;n||(n=Go(t.KP_VISITOR_ID,i))&&(n=qo(n));o||(o=Go(t.KC_PHONE,i));const l=$o(t.RP_PHONE_NUMBER),d=$o(t.SR_PHONE_NUMBER),h=$o(t.NO_OTP_FLOW_PHONE_NUMBER),f=$o(t.EXPIRED_PH_NO);r?.value?window.parent.postMessage({type:e,authenticated:!0,visitorId:n,phoneNumber:r,phoneNumberSource:O,userId:a,kpCount:c},"*"):_?.value&&p?window.parent.postMessage({type:e,authenticated:!0,visitorId:n,phoneNumber:_,phoneNumberSource:k,userId:a,kpCount:c},"*"):f?.value?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:f,phoneNumberSource:R,userId:a,kpCount:c},"*"):d?.value?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:d,phoneNumberSource:I,userId:a,kpCount:c},"*"):!_?.value||p||o?_?.value&&!p&&o||o?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:o,phoneNumberSource:N,userId:a,kpCount:c},"*"):l?.value?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:l,phoneNumberSource:S,userId:a,kpCount:c},"*"):nr?.value?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:nr,phoneNumberSource:P,userId:a,kpCount:c},"*"):s?.value?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:s,phoneNumberSource:v,userId:a,kpCount:c},"*"):h?.value?window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:h,phoneNumberSource:T},"*"):window.parent.postMessage({type:e,visitorId:n,userId:a,kpCount:c},"*"):window.parent.postMessage({type:e,authenticated:!1,visitorId:n,phoneNumber:_,phoneNumberSource:k,userId:a,kpCount:c},"*")}(h,z,f,G,x,H,ee)}else f||Y||h!==Po?h!==r||Y&&(!Y||K||"true"!==m)||null==f||""===f.trim()?Y&&K&&G?.value&&h!==r?window.parent.postMessage({type:h,token:q,kwikpass:$,core_token:Y,phoneNumber:G,reload:!0,whatsappToken:W,showSuccessScreenInAutoLoadPopUp:Q,user_type:J,gkLoginSource:X,isCoreTokenValid:K,userId:ee,kpCount:Z},"*"):!j?.value||Y||G?.value?!y?.value||Y||G?.value?f||Y||q||G?.value||B||!(V?.value?.length>0)?nr?.value?window.parent.postMessage({type:c,[t.KP_NON_OTP_VERIFIED_USER]:nr,userId:ee,kpCount:Z}):H?.value?window.parent.postMessage({type:u,[t.SHOPIFY_COD_UNAUTH_PHONE_NUMBER]:H,userId:ee,kpCount:Z},"*"):(ee||Z)&&window.parent.postMessage({userId:ee,kpCount:Z},"*"):window.parent.postMessage({type:i,[t.RP_PHONE_NUMBER]:V,userId:ee,kpCount:Z},"*"):window.parent.postMessage({type:s,[t.SR_PHONE_NUMBER]:y,userId:ee,kpCount:Z},"*"):window.parent.postMessage({type:a,[t.EXPIRED_PH_NO]:j,userId:ee,kpCount:Z},"*"):Vo(t.KC_PHONE,f,x,365,!0):(f=Go(t.KC_PHONE,x),j?.value&&window.parent.postMessage({type:a,[t.EXPIRED_PH_NO]:j,userId:ee,kpCount:Z},"*"),y?.value?window.parent.postMessage({type:s,[t.SR_PHONE_NUMBER]:y,userId:ee,kpCount:Z},"*"):null!=f&&""!==f.trim()&&(Ho({type:"snowplow_event",context:{category:Ne.kc_phone_found_on_sso,action:Se.automated,label:!Y||Y&&"true"===m?Ie.kc_phone_found_without_kp_token:Ie.kc_phone_found_with_kp_token,property:Pe.kc_phone_number,country_code:b,value:f,analyticEvent:ve.EVENTS.KC_PHONE_NUMBER_SSO}},F),window.parent.postMessage({type:r,kcPhoneNumber:f,userId:ee,kpCount:Z},"*")),V?.value?.length>0?window.parent.postMessage({type:i,[t.RP_PHONE_NUMBER]:V,userId:ee,kpCount:Z},"*"):H?.value&&window.parent.postMessage({type:u,[t.SHOPIFY_COD_UNAUTH_PHONE_NUMBER]:H,userId:ee,kpCount:Z},"*"));const te=f||y?.value||V?.value;if(te){const e=btoa(te);Vo("kpExistingPhoneNumber",e)}Lo(Go,0,F)}var d}));const or=(e,t,n)=>{const o=function(e,t){return`${e||""}:${t||""}`}(e,n),r=er[o],i=Date.now();if(r&&i-r.timestamp<tr)return r.result;let s,a,c=e,u=Go(y,t);return c?(!u&&Vo(y,c),a={newUserId:c}):(u||(u=B().toString(),Vo(y,u)),s=Yo(t,u,n,!0),a={kpCount:s,newUserId:u}),er[o]={timestamp:i,result:a},a}}();
